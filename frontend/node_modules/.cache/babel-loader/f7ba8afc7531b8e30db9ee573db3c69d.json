{"ast":null,"code":"import _defineProperty from \"/Users/dogoy/ANAVATECH/project/aa/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/dogoy/ANAVATECH/project/aa/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport genPurePanel from '../_util/PurePanel';\nimport { ConfigContext } from '../config-provider/context';\nimport Popover from '../popover';\nimport theme from '../theme';\nimport ColorPickerPanel from './ColorPickerPanel';\nimport ColorTrigger from './components/ColorTrigger';\nimport useColorState from './hooks/useColorState';\nimport useStyle from './style/index';\nimport { customizePrefixCls, generateColor } from './util';\nvar ColorPicker = function ColorPicker(props) {\n  var value = props.value,\n    defaultValue = props.defaultValue,\n    format = props.format,\n    _props$allowClear = props.allowClear,\n    allowClear = _props$allowClear === void 0 ? false : _props$allowClear,\n    presets = props.presets,\n    children = props.children,\n    _props$trigger = props.trigger,\n    trigger = _props$trigger === void 0 ? 'click' : _props$trigger,\n    open = props.open,\n    disabled = props.disabled,\n    _props$placement = props.placement,\n    placement = _props$placement === void 0 ? 'bottomLeft' : _props$placement,\n    _props$arrow = props.arrow,\n    arrow = _props$arrow === void 0 ? true : _props$arrow,\n    style = props.style,\n    className = props.className,\n    rootClassName = props.rootClassName,\n    styles = props.styles,\n    onFormatChange = props.onFormatChange,\n    onChange = props.onChange,\n    onOpenChange = props.onOpenChange,\n    getPopupContainer = props.getPopupContainer,\n    _props$autoAdjustOver = props.autoAdjustOverflow,\n    autoAdjustOverflow = _props$autoAdjustOver === void 0 ? true : _props$autoAdjustOver;\n  var _useContext = useContext(ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    direction = _useContext.direction;\n  var _theme$useToken = theme.useToken(),\n    token = _theme$useToken.token;\n  var _useColorState = useColorState(token.colorPrimary, {\n      value: value,\n      defaultValue: defaultValue\n    }),\n    _useColorState2 = _slicedToArray(_useColorState, 2),\n    colorValue = _useColorState2[0],\n    setColorValue = _useColorState2[1];\n  var _useMergedState = useMergedState(false, {\n      value: open,\n      postState: function postState(openData) {\n        return !disabled && openData;\n      },\n      onChange: onOpenChange\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    popupOpen = _useMergedState2[0],\n    setPopupOpen = _useMergedState2[1];\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    colorCleared = _useState2[0],\n    setColorCleared = _useState2[1];\n  var prefixCls = getPrefixCls('color-picker', customizePrefixCls);\n  var _useStyle = useStyle(prefixCls),\n    _useStyle2 = _slicedToArray(_useStyle, 2),\n    wrapSSR = _useStyle2[0],\n    hashId = _useStyle2[1];\n  var rtlCls = _defineProperty({}, \"\".concat(prefixCls, \"-rtl\"), direction);\n  var mergeRootCls = classNames(rootClassName, rtlCls);\n  var mergeCls = classNames(mergeRootCls, className, hashId);\n  var mergePopupCls = classNames(prefixCls, rtlCls);\n  var popupAllowCloseRef = useRef(true);\n  var handleChange = function handleChange(data, type, pickColor) {\n    var color = generateColor(data);\n    if (colorCleared) {\n      setColorCleared(false);\n      var hsba = color.toHsb();\n      // ignore alpha slider\n      if (colorValue.toHsb().a === 0 && type !== 'alpha') {\n        hsba.a = 1;\n        color = generateColor(hsba);\n      }\n    }\n    if (!value) {\n      setColorValue(color);\n    }\n    // Only for drag-and-drop color picking\n    if (pickColor) {\n      popupAllowCloseRef.current = false;\n    }\n    onChange === null || onChange === void 0 ? void 0 : onChange(color, color.toHexString());\n  };\n  var handleClear = function handleClear(clear) {\n    setColorCleared(clear);\n  };\n  var handleChangeComplete = function handleChangeComplete() {\n    popupAllowCloseRef.current = true;\n  };\n  var popoverProps = {\n    open: popupOpen,\n    trigger: trigger,\n    placement: placement,\n    arrow: arrow,\n    rootClassName: rootClassName,\n    getPopupContainer: getPopupContainer,\n    autoAdjustOverflow: autoAdjustOverflow\n  };\n  var colorBaseProps = {\n    prefixCls: prefixCls,\n    color: colorValue,\n    allowClear: allowClear,\n    colorCleared: colorCleared,\n    disabled: disabled,\n    presets: presets,\n    format: format,\n    onFormatChange: onFormatChange\n  };\n  useEffect(function () {\n    if (colorCleared) {\n      setPopupOpen(false);\n    }\n  }, [colorCleared]);\n  return wrapSSR( /*#__PURE__*/React.createElement(Popover, Object.assign({\n    style: styles === null || styles === void 0 ? void 0 : styles.popup,\n    onOpenChange: function onOpenChange(visible) {\n      if (popupAllowCloseRef.current) {\n        setPopupOpen(visible);\n      }\n    },\n    content: /*#__PURE__*/React.createElement(ColorPickerPanel, Object.assign({}, colorBaseProps, {\n      onChange: handleChange,\n      onChangeComplete: handleChangeComplete,\n      onClear: handleClear\n    })),\n    overlayClassName: mergePopupCls\n  }, popoverProps), children || /*#__PURE__*/React.createElement(ColorTrigger, {\n    open: popupOpen,\n    className: mergeCls,\n    style: style,\n    color: colorValue,\n    prefixCls: prefixCls,\n    disabled: disabled,\n    colorCleared: colorCleared\n  })));\n};\nif (process.env.NODE_ENV !== 'production') {\n  ColorPicker.displayName = 'ColorPicker';\n}\nvar PurePanel = genPurePanel(ColorPicker, 'color-picker', /* istanbul ignore next */\nfunction (prefixCls) {\n  return prefixCls;\n}, function (props) {\n  return Object.assign(Object.assign({}, props), {\n    placement: 'bottom',\n    autoAdjustOverflow: false\n  });\n});\nColorPicker._InternalPanelDoNotUseOrYouWillBeFired = PurePanel;\nexport default ColorPicker;","map":null,"metadata":{},"sourceType":"module"}